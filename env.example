# Supabase File Manager Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# AUTHENTICATION SUPABASE (Central Auth Project)
# =============================================================================
# This is a separate Supabase project used for:
# - User authentication (login, register)
# - Storing user settings and encrypted credentials
# 
# Create a dedicated project at https://supabase.com for authentication

# Auth project URL
NEXT_PUBLIC_AUTH_SUPABASE_URL=https://your-auth-project.supabase.co

# Auth project anon key (public, used in browser)
# Get from: Supabase Dashboard > Settings > API > anon public key
NEXT_PUBLIC_AUTH_SUPABASE_ANON_KEY=your-anon-key-here

# Auth project service role key (server-side only, KEEP SECRET)
# Get from: Supabase Dashboard > Settings > API > service_role key
AUTH_SUPABASE_SERVICE_KEY=your-service-role-key-here

# =============================================================================
# ENCRYPTION KEY
# =============================================================================
# Used to encrypt user API keys before storing in database
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Must be exactly 64 hex characters (256 bits)
ENCRYPTION_KEY=your-64-character-hex-encryption-key-here

# =============================================================================
# LEGACY/FALLBACK SUPABASE (Optional - for non-auth mode)
# =============================================================================
# These are only used if auth is disabled or for backwards compatibility
# In multi-user mode, each user configures their own Supabase project via Settings

# Your Supabase project URL
# Format: https://your-project-id.supabase.co
SUPABASE_URL=https://your-project-id.supabase.co

# Your Supabase service role key (for server-side operations)
# Get this from: Supabase Dashboard > Settings > API > service_role key
# WARNING: Keep this secret! Never commit it to version control.
SUPABASE_KEY=your-service-role-key-here

# Default bucket name (optional, defaults to 'files')
SUPABASE_BUCKET=files

# Maximum retry attempts for failed operations (optional, defaults to 3)
# Uses exponential backoff: 1s, 2s, 4s delays between retries
MAX_RETRIES=3

# Log file path (optional, defaults to 'supabase-uploader.log')
LOG_FILE=supabase-uploader.log

# Enable file logging (optional, defaults to 'true')
# Set to 'false' to disable logging
ENABLE_LOGGING=true

# =============================================================================
# SIGNED URL SECURITY DEFAULTS
# =============================================================================
# Default signed URL TTL in seconds (short-lived by default)
SIGNED_URL_TTL_DEFAULT=60

# Enforced server-side minimum/maximum TTL bounds in seconds
SIGNED_URL_TTL_MIN=30
SIGNED_URL_TTL_MAX=300

# Allowed object key scope templates (comma-separated, supports {userId})
# Default allows only objects under each user's prefix.
# Example: {userId}/private/,{userId}/shared/
SIGNED_URL_ALLOWED_PREFIXES={userId}/

# Enable emoji in CLI output (optional, defaults to 'true')
# Set to 'false' to disable emoji in console output
ENABLE_EMOJI=true
